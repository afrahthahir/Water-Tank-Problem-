<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Tank Problem - Interview Assignment</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
            background-color: #f4f7f6;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }
        input {
            padding: 12px;
            width: 300px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        button {
            padding: 12px 24px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.3s;
        }
        button:hover { background-color: #218838; }
        #svgContainer {
            margin: 30px 0;
            overflow-x: auto;
            max-width: 100%;
            border-bottom: 2px solid #333;
        }
        #outputText {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 10px;
        }
        .legend-item { display: flex; align-items: center; gap: 5px; font-size: 14px; }
        .box { width: 15px; height: 15px; border: 1px solid #000; }
    </style>
</head>
<body>

<div class="container">
    <h2>Water Tank Problem</h2>
    <p>Enter block heights separated by commas:</p>
    <input type="text" id="inputArray" value="0,4,0,0,0,6,0,6,4,0">
    <button onclick="solveWaterTank()">Calculate</button>

    <div id="svgContainer"></div>

    <div class="legend">
        <div class="legend-item"><div class="box" style="background: #fff200;"></div> Block</div>
        <div class="legend-item"><div class="box" style="background: #00aeef;"></div> Water</div>
    </div>

    <p id="outputText">Output: 0 Units</p>
</div>

<script>
    function solveWaterTank() {
        // 1. Parse Input
        const inputStr = document.getElementById('inputArray').value;
        const heights = inputStr.split(',').map(num => {
            const val = parseInt(num.trim());
            return isNaN(val) || val < 0 ? 0 : val; // Ensure n > -1 
        });

        // 2. Two-Pointer Algorithm to calculate trapped water
        let left = 0, right = heights.length - 1;
        let leftMax = 0, rightMax = 0;
        let totalWater = 0;
        const waterLevels = new Array(heights.length).fill(0);

        while (left < right) {
            if (heights[left] < heights[right]) {
                // If the current block is taller than our previous left peak,
                // it becomes the new boundary; water cannot be trapped here.
                if (heights[left] >= leftMax) {
                    leftMax = heights[left];
                } else {
                // If the current block is shorter than leftMax, water is trapped.
                // Amount = (Height of the peak) - (Height of current block).
                    waterLevels[left] = leftMax - heights[left];
                    totalWater += waterLevels[left];
                }
                left++;
            } else {
                // It triggers if the right block is shorter than or equal to the left.
                if (heights[right] >= rightMax) {
                    // Update the peak on the right side.
                    rightMax = heights[right];
                } else {
                    // Calculate trapped water using the right peak as the boundary.
                    waterLevels[right] = rightMax - heights[right];
                    totalWater += waterLevels[right];
                }
                right--;
            }
        }

        renderSVG(heights, waterLevels);
        document.getElementById('outputText').innerText = `Output: ${totalWater} Units`;
    }

    function renderSVG(heights, waterLevels) {
        const container = document.getElementById('svgContainer');
        const scale = 30; // pixels per unit
        const unitWidth = 40;
        const maxHeight = Math.max(...heights, 1);
        const svgHeight = (maxHeight + 1) * scale;
        const svgWidth = heights.length * unitWidth;

        let svgContent = `<svg width="${svgWidth}" height="${svgHeight}">`;

        heights.forEach((h, i) => {
            const x = i * unitWidth;
            
            // Draw Trapped Water (Blue) 
            if (waterLevels[i] > 0) {
                const wH = waterLevels[i] * scale;
                const wY = svgHeight - (h * scale) - wH;
                svgContent += `<rect x="${x}" y="${wY}" width="${unitWidth}" height="${wH}" fill="#00aeef" stroke="black" />`;
            }

            // Draw Block (Yellow) 
            if (h > 0) {
                const bH = h * scale;
                const bY = svgHeight - bH;
                svgContent += `<rect x="${x}" y="${bY}" width="${unitWidth}" height="${bH}" fill="#fff200" stroke="black" />`;
            }
        });

        svgContent += `</svg>`;
        container.innerHTML = svgContent;
    }

    // Initialize with default example
    solveWaterTank();
</script>

</body>
</html>